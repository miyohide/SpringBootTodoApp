<!doctype html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="spring boot example (todo)">
    <meta name="author" content="Masatoshi.Fujino">
    <title>Spring Boot Todo App</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">  </head>
  <body>
    <div class="container">
      <div class="header clearfix">
        <h3 class="text-muted">Spring Boot Todo App</h3>
      </div>
      <div class="jumbotron">
        <h1>登録フォーム</h1>
        <form
          method="post"
          th:if="${form.isNewTask}"
          action="./tasks.html"
          th:action="@{/tasks}">
          <div class="form-row">
            <div class="form-group col-md-8">
              <label for="input-text-subject">
                タスク
              </label>
              <input class="form-control"
                     required="required"
                     type="text"
                     placeholder="やること"
                     th:field="${form.subject}"
                     id="input-text-subject" />

            </div>
            <div class="form-group col-md-4">
              <label for="input-date-deadline">
                期限
              </label>
              <input class="form-control"
                     required="required"
                     type="date"
                     th:field="${form.deadLine}"
                     id="input-date-deadline" />
            </div>
          </div>
          <div class="form-group">
            <div class="form-check">
              <input class="form-check-input"
                     type="checkbox"
                     th:field="${form.hasDone}"
                     id="gridCheck">
              <label class="form-check-label" for="gridCheck">
                完了チェック
              </label>
            </div>
          </div>
          <input type="hidden" th:field="${form.isNewTask}">
          <button type="submit" class="btn btn-primary">登録</button>
        </form>
        <form
          method="POST"
          action="./tasks.html"
          th:unless="${form.isNewTask}"
          th:action="@{/tasks/{id}(id=${taskId})}">
          <input name="_method"
                 type="hidden" value="PUT">
          <div class="form-row">
            <div class="form-group col-md-8">
              <label for="input-text-subject">
                タスク
              </label>
              <input class="form-control"
                     required="required"
                     type="text"
                     placeholder="やること"
                     th:field="${form.subject}"
                     id="input-text-subject" />
            </div>
            <div class="form-group col-md-4">
              <label for="input-date-deadline">
                期限
              </label>
              <input class="form-control"
                     required="required"
                     type="date"
                     th:field="${form.deadLine}"
                     id="input-date-deadline" />
            </div>
          </div>
          <div class="form-group">
            <div class="form-check">
              <input class="form-check-input"
                     type="checkbox"
                     th:field="${form.hasDone}"
                     id="gridCheck">
              <label class="form-check-label" for="gridCheck">
                完了チェック
              </label>
            </div>
          </div>
          <input type="hidden" th:field="${form.isNewTask}">
          <button type="submit" class="btn btn-success">更新</button>
          <a type="button"
             class="btn btn-warning"
             href="./tasks.html"
             th:href="@{/tasks}">
            クリア
          </a>
        </form>
      </div>

      <hr/>
      <h2>タスク一覧</h2>
      <div class="table-responsive">
        <table
          class="table
                 table-condensed">
          <thead>
            <tr>
              <th scope="col">タスク名</th>
              <th scope="col">期限</th>
              <th colspan="2">編集</th>
            </tr>
          </thead>
          <tbody th:remove="all-but-first">
            <tr th:each="task : ${tasks}"
                th:class="${task.hasDone}? 'table-dark'">
              <td th:text="${task.subject}">
                原稿の締め切り
              </td>
              <td th:text="${task.deadLine}">
                2018-06-17
              </td>
              <td>
                <a type="button"
                   class="btn"
                   th:classappend="${task.hasDone}
                         ? 'btn-light'
                         :'btn-success'"
                   href="./tasks.html"
                   th:href="@{/tasks/{id}(id=${task.id})}">
                  編集
                </a>
              </td>
              <td>
                <form
                  method="POST"
                  action="./tasks.html"
                  th:action="@{/tasks/{id}(id=${task.id})}" >
                  <input type="hidden"
                         name="_method"
                         value="DELETE" />
                  <input type="submit"
                         class="btn"
                         th:classappend="${task.hasDone}
                               ? 'btn-light'
                               :'btn-danger'"
                         value="削除"/>
                </form>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </body>
</html>
